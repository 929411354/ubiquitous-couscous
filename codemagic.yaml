# codemagic.yaml
workflows:
  flutter-workflow:
    name: Flutter Build
    environment:
      flutter: "3.19.5"  # æŒ‡å®šFlutterç‰ˆæœ¬
      xcode: latest
      cocoapods: default
   Â 
    # ğŸš« å…³é”®ä¿®å¤ï¼šæ˜¾å¼å£°æ˜é¡¹ç›®ç±»å‹
    project_type: flutter
   Â 
    scripts:
      # ğŸ”§ è§£å†³ä¸­æ–‡è·¯å¾„å†²çª
      - export LANG=en_US.UTF-8
      - export LC_ALL=en_US.UTF-8
     Â 
      # ğŸ“¦ ä¾èµ–å®‰è£…
      - flutter pub get
      - flutter clean
     Â 
      # âš™ï¸ æ„å»ºé…ç½®
      - flutter build apk --release --target-platform android-arm64
      - flutter build ipa --export-options-plist ios/ExportOptions.plist
   Â 
    # ğŸ“± ç”Ÿæˆå®‰å“APK
    artifacts:
      - build/**/outputs/**/*.apk
   Â 
    # ğŸ“± ç”ŸæˆiOS IPA
    publishing:
      app_store_connect:
        api_key: $APP_STORE_CONNECT_API_KEY
      email:
        recipients:
          - your_email@example.com

# ğŸ” ç­¾åé…ç½®ï¼ˆæ ¹æ®é¡¹ç›®ç±»å‹äºŒé€‰ä¸€ï¼‰
android_signing:
  type: google_play  # æˆ– manual
  # é…ç½®å†…å®¹...

ios_signing:
  distribution_type: app_store  # æˆ– development/ad_hoc
  # é…ç½®å†…å®¹...
